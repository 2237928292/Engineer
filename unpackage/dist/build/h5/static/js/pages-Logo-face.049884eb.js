(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["pages-Logo-face"],{"067a":function(t,n,a){"use strict";Object.defineProperty(n,"__esModule",{value:!0}),n.default=void 0;a("93a4");var i={data:function(){return{msg:"",isSound:!0,AutoClip:!0,backCamera:!1,loginPhone:"",data:[],Base64:""}},onLoad:function(){},methods:{inter:function(e){var t=this;if(""==t.loginPhone)return uni.showToast({title:"请输入登录名",icon:"none"}),!1;t.Base64="";var n=uni.requireNativePlugin("PP-BaiduFace"),a={licenseName:"idl-license",licenseSuffix:"face-android",licenseId:"com-gcs-yzj-face-android",liveActionArray:["Eye","HeadLeft","HeadLeftOrRight"],bgColor:"#56445D",textColor:"#C5E99B",isSound:t.isSound,AutoClip:t.AutoClip,isBackCamera:t.backCamera};"iOS"==plus.os.name&&(a.licenseSuffix="face-ios",a.licenseId="com-gcs-yzj-face-ios"),1==e?n.faceliveness(a,(function(e){t.msg=(new Date).getHours()+":"+(new Date).getMinutes()+"  "+JSON.stringify(e)+"<br/>"+t.msg,'"OK"'==e.FaceStatusEnum&&t.saveImgs(e.base64ImageMap)})):2==e&&n.recycler(a,(function(e){t.msg=(new Date).getHours()+":"+(new Date).getMinutes()+"  "+JSON.stringify(e)+"<br/>"+t.msg,'"OK"'==e.FaceStatusEnum&&t.saveImgs(e.base64ImageMap)}))},saveImgs:function(e){var t=this;for(var n in t.logoSrcs=[],e){var a=e[n];t.bitmapsave(a),t.Base64=a}var i={url:t.$store.state.url+"Account/FaceLogin",method:"POST",data:{UserName:t.loginPhone,FileStr:t.Base64}};t.$http(i).then((function(e){t.$store.state.username=t.loginPhone,t.$store.state.token=e.Data,uni.setStorage({key:"Token",data:e.Data,success:function(){uni.setStorage({key:"admin",data:t.loginPhone,success:function(){uni.switchTab({url:"/pages/home/home"})}})}})}))},bitmapsave:function(t){var n=this,a=new plus.nativeObj.Bitmap("test");a.loadBase64Data(t,(function(e){a.save("_doc/_tmp/head"+(new Date).getTime()+".png",{},(function(e){n.logoSrcs.push(e.target)}))}),(function(){console.log("加载Base64图片数据失败："+JSON.stringify(e))}))}}};n.default=i},"0db6":function(e,t,n){"use strict";var a=n("af7a"),i=n.n(a);i.a},"3f1c":function(e,t,n){"use strict";n.r(t);var a=n("4bfb"),i=n("9f21");for(var o in i)"default"!==o&&function(e){n.d(t,e,(function(){return i[e]}))}(o);n("0db6");var r,s=n("f0c5"),c=Object(s["a"])(i["default"],a["b"],a["c"],!1,null,"2902e2e0",null,!1,a["a"],r);t["default"]=c.exports},"4bfb":function(e,t,n){"use strict";var a;n.d(t,"b",(function(){return i})),n.d(t,"c",(function(){return o})),n.d(t,"a",(function(){return a}));var i=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("v-uni-view",{staticClass:"content"},[n("v-uni-view",{staticClass:"inputArea assd"},[n("v-uni-input",{staticClass:"inputClass",attrs:{placeholder:"请输入账号",maxlength:"20"},model:{value:e.loginPhone,callback:function(t){e.loginPhone=t},expression:"loginPhone"}})],1),n("v-uni-view",[n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.inter(1)}}},[e._v("活体检测")]),n("v-uni-button",{on:{click:function(t){arguments[0]=t=e.$handleEvent(t),e.inter(2)}}},[e._v("人脸图像采集")])],1),n("v-uni-view",{staticClass:"asd"},[n("v-uni-textarea",{model:{value:e.Base64,callback:function(t){e.Base64=t},expression:"Base64"}})],1),n("v-uni-scroll-view",{attrs:{"scroll-y":"true"}},[n("v-uni-view",{staticClass:"msg",domProps:{innerHTML:e._s(e.logoSrcs)}})],1)],1)},o=[]},"93a4":function(e,t,n){"use strict";function a(e){if(0===e.indexOf("_www")||0===e.indexOf("_doc")||0===e.indexOf("_documents")||0===e.indexOf("_downloads"))return e;if(0===e.indexOf("file://"))return e;if(0===e.indexOf("/storage/emulated/0/"))return e;if(0===e.indexOf("/")){var t=plus.io.convertAbsoluteFileSystem(e);if(t!==e)return t;e=e.substr(1)}return"_www/"+e}function i(e){return new Promise((function(t,n){if("object"===typeof window&&"document"in window){if("function"===typeof FileReader){var i=new XMLHttpRequest;return i.open("GET",e,!0),i.responseType="blob",i.onload=function(){if(200===this.status){var e=new FileReader;e.onload=function(e){t(e.target.result)},e.onerror=n,e.readAsDataURL(this.response)}},i.onerror=n,void i.send()}var o=document.createElement("canvas"),r=o.getContext("2d"),s=new Image;return s.onload=function(){o.width=s.width,o.height=s.height,r.drawImage(s,0,0),t(o.toDataURL()),o.height=o.width=0},s.onerror=n,void(s.src=e)}"object"!==typeof plus?"object"===typeof wx&&wx.canIUse("getFileSystemManager")?wx.getFileSystemManager().readFile({filePath:e,encoding:"base64",success:function(e){t("data:image/png;base64,"+e.data)},fail:function(e){n(e)}}):n(new Error("not support")):plus.io.resolveLocalFileSystemURL(a(e),(function(e){e.file((function(e){var a=new plus.io.FileReader;a.onload=function(e){t(e.target.result)},a.onerror=function(e){n(e)},a.readAsDataURL(e)}),(function(e){n(e)}))}),(function(e){n(e)}))}))}function o(e){return new Promise((function(t,n){if("object"===typeof window&&"document"in window){e=e.split(",");var a=e[0].match(/:(.*?);/)[1],i=atob(e[1]),o=i.length,r=new Uint8Array(o);while(o--)r[o]=i.charCodeAt(o);return t((window.URL||window.webkitURL).createObjectURL(new Blob([r],{type:a})))}var s=e.match(/data\:\S+\/(\S+);/);s?s=s[1]:n(new Error("base64 error"));var c=Date.now()+"."+s;if("object"!==typeof plus)if("object"===typeof wx&&wx.canIUse("getFileSystemManager")){var u=wx.env.USER_DATA_PATH+"/"+c;wx.getFileSystemManager().writeFile({filePath:u,data:e.replace(/^data:\S+\/\S+;base64,/,""),encoding:"base64",success:function(){t(u)},fail:function(e){n(e)}})}else n(new Error("not support"));else{var d=new plus.nativeObj.Bitmap("bitmap"+Date.now());d.loadBase64Data(e,(function(){var e="_doc/uniapp_temp/"+c;d.save(e,{},(function(){d.clear(),t(e)}),(function(e){d.clear(),n(e)}))}),(function(e){d.clear(),n(e)}))}}))}n("c975"),n("ace4"),n("d3b7"),n("ac1f"),n("3ca3"),n("466d"),n("5319"),n("1276"),n("5cc6"),n("9a8c"),n("a975"),n("735e"),n("c1ac"),n("d139"),n("3a7b"),n("d5d6"),n("82f8"),n("e91f"),n("60bd"),n("5f96"),n("3280"),n("3fcc"),n("ca91"),n("25a1"),n("cd26"),n("3c5d"),n("2954"),n("649e"),n("219c"),n("170b"),n("b39a"),n("72f7"),n("ddb0"),n("2b3d"),Object.defineProperty(t,"__esModule",{value:!0}),t.pathToBase64=i,t.base64ToPath=o},"9f21":function(e,t,n){"use strict";n.r(t);var a=n("067a"),i=n.n(a);for(var o in a)"default"!==o&&function(e){n.d(t,e,(function(){return a[e]}))}(o);t["default"]=i.a},af7a:function(e,t,n){var a=n("d0c4");"string"===typeof a&&(a=[[e.i,a,""]]),a.locals&&(e.exports=a.locals);var i=n("4f06").default;i("35650880",a,!0,{sourceMap:!1,shadowMode:!1})},d0c4:function(e,t,n){var a=n("24fb");t=a(!1),t.push([e.i,".content[data-v-2902e2e0]{text-align:center;height:%?400?%}.asd[data-v-2902e2e0]{width:100%;height:200px;overflow:auto}.logo[data-v-2902e2e0]{height:%?200?%;width:%?200?%;margin-top:%?50?%}.title[data-v-2902e2e0]{font-size:%?36?%;color:#8f8f94}.msg[data-v-2902e2e0]{text-align:left;padding:%?40?%;font-size:%?25?%;color:#f0ad4e}.inputArea[data-v-2902e2e0]{padding:%?20?% 10%;.right{float:right}}.assd[data-v-2902e2e0]{margin-top:30px;box-sizing:border-box}.inputClass[data-v-2902e2e0]{border:2px solid #ccc;border-radius:22px;outline:0;padding:8px 15px;font-weight:700}",""]),e.exports=t}}]);